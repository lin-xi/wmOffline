webpackJsonp([3],{13:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,i,a,r){var o=e&&e.defaultProps,n=arguments.length-3;if(i||0===n||(i={}),i&&o)for(var s in o)void 0===i[s]&&(i[s]=o[s]);else i||(i=o||{});if(1===n)i.children=r;else if(n>1){for(var d=Array(n),l=0;l<n;l++)d[l]=arguments[l+3];i.children=d}return{$$typeof:t,type:e,key:void 0===a?null:""+a,ref:null,props:i,_owner:null}}}();i(17);var o=i(3),n=a(o),s=(i(5),i(8)),d=i(6),l=a(d),c=n.default.createClass({displayName:"Toast",mixins:[l.default],render:function(){return r("div",{className:"toast",style:{display:this.props.display?"block":"none"}},void 0,r("div",{className:"mask"},void 0,r("div",{className:"popUp"},void 0,this.props.text)))}}),h=function(t){return{text:t.Toast.text,display:t.Toast.display}},p=(0,s.connect)(h)(c);e.default=p;(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"Toast","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/Toast/Toast.js"),__REACT_HOT_LOADER__.register(h,"mapStateToProps","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/Toast/Toast.js"),__REACT_HOT_LOADER__.register(p,"default","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/Toast/Toast.js"))})();t.exports=e.default},15:function(t,e,i){e=t.exports=i(1)(),e.push([t.id,".toast{position:fixed;left:0;right:0;bottom:0;top:0;z-index:99999}.toast,.toast .mask{width:100%;height:100%}.toast .mask{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.toast .mask .popUp{padding:.55rem 1.35rem;background-color:rgba(30,30,30,.8);color:#fff;font-size:14px;text-align:center;box-shadow:rgba(0,0,0,.4);border-radius:5px;max-width:15rem;word-break:break-all}",""])},17:function(t,e,i){var a=i(15);"string"==typeof a&&(a=[[t.id,a,""]]);i(2)(a,{});a.locals&&(t.exports=a.locals)},47:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getBannerList=e.getTopArticle=e.fetchRecommendList=e.fetchContent=void 0;var r=i(10),o=a(r),n=i(9),s=e.fetchContent=function(t){return(0,o.default)({url:n.CONTENT_LIST_URL,data:t})},d=e.fetchRecommendList=function(t){return(0,o.default)({url:n.GET_HOME_RECOMMEND_LIST,data:t})},l=e.getTopArticle=function(t){return(0,o.default)({url:n.GET_TOP_CONTENT_LIST,data:t})},c=e.getBannerList=function(t){return(0,o.default)({url:n.GET_BANNER_LIST,data:t})};(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(s,"fetchContent","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/actions/HomePage.js"),__REACT_HOT_LOADER__.register(d,"fetchRecommendList","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/actions/HomePage.js"),__REACT_HOT_LOADER__.register(l,"getTopArticle","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/actions/HomePage.js"),__REACT_HOT_LOADER__.register(c,"getBannerList","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/actions/HomePage.js"))})()},56:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,i,a,r){var o=e&&e.defaultProps,n=arguments.length-3;if(i||0===n||(i={}),i&&o)for(var s in o)void 0===i[s]&&(i[s]=o[s]);else i||(i=o||{});if(1===n)i.children=r;else if(n>1){for(var d=Array(n),l=0;l<n;l++)d[l]=arguments[l+3];i.children=d}return{$$typeof:t,type:e,key:void 0===a?null:""+a,ref:null,props:i,_owner:null}}}();i(121);var o=i(3),n=a(o),s=i(7),d=a(s),l=i(5),c=i(6),h=a(c),p=i(4),m=n.default.createClass({displayName:"BannerCard",getInitialState:function(){return{page:(0,p._getStaticPageInfo)()}},mixins:[h.default],go:function(){var t=this.props.data;if((0,p._sak)({page:this.state.page,da_src:this.state.page+".pagePv.bannerCard."+t.commend_id,da_act:"click"}),t.commend_detail&&t.commend_detail.length)switch(+t.commend_type){case 1:d.default.changePage({url:location.href.replace(/#.*/,"#/"+(+t.commend_detail[0].is_self?"selfArticle":"outArticle")+"/"+t.commend_detail[0].id),newPage:!0});break;case 2:d.default.changePage({url:location.href.replace(/#.*/,"#/articleList/"+t.commend_id),newPage:!0});break;case 3:d.default.changePage({url:location.href.replace(/#.*/,"#/columnHome/"+t.commend_detail[0].id),newPage:!0});break;case 4:var e=t.commend_detail[0].id;0===e.indexOf("bdwm")?location.href=e:d.default.changePage({url:e,newPage:!0,offline:!1})}},render:function(){var t=this.props.data;return r("div",{className:"banner_card",onClick:(0,l.wrapperClick)(this.go)},void 0,r("img",{className:"head_img",src:(0,p._wrapperImage)(t.commend_picture,{h:200,w:200}),alt:""}),r("div",{className:"title"},void 0,t.title))}}),u=m;e.default=u;(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(m,"BannerCard","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/Home/BannerCard/index.js"),__REACT_HOT_LOADER__.register(u,"default","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/Home/BannerCard/index.js"))})();t.exports=e.default},57:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,i,a,r){var o=e&&e.defaultProps,n=arguments.length-3;if(i||0===n||(i={}),i&&o)for(var s in o)void 0===i[s]&&(i[s]=o[s]);else i||(i=o||{});if(1===n)i.children=r;else if(n>1){for(var d=Array(n),l=0;l<n;l++)d[l]=arguments[l+3];i.children=d}return{$$typeof:t,type:e,key:void 0===a?null:""+a,ref:null,props:i,_owner:null}}}();i(122);var o=i(3),n=a(o),s=i(5),d=i(6),l=a(d),c=i(4),h=i(7),p=a(h),m=r("div",{className:"right"},void 0,"进店"),u=n.default.createClass({displayName:"RecommendCard",mixins:[l.default],getInitialState:function(){return{item:this.props.item,index:this.props.index}},checkNewImg:function(t){return t?(0,c._wrapperImage)(t,{s:"2",w:"500",h:"500"}):"http://img.waimai.baidu.com/pb/dea5d13a74bbc6614bff3084c8c1f7305d"},toShopMenu:function(t){var e=t.currentTarget.getAttribute("data-shopId"),i=t.target.getAttribute("data-dishId"),a=t.target.getAttribute("data-cateId"),r=t.currentTarget.getAttribute("data-index"),o={pageName:"shopMenu",pageParams:{shopId:e,dishActivityId:""}};(0,c._isIOS)()?(o.pageParams.categoryId=a||"",o.pageParams.dishId=i):a&&(o.pageParams.categoryId=a,o.pageParams.dishId=i);var n={daSrc:"celue-toShop",daAct:"click",daExt:{passuid:this.props.passuid,shopId:e,dishId:i||"",categoryId:a||""}};p.default.sendOfflineStat(n),(0,c._sak)({page:"ChiShaIndexPg",da_src:"shopRecommend.card.click",da_act:"click"}),(0,c._sak)({page:"ChiShaIndexPg",da_src:"shopRecommend.card0"+r+".click",da_act:"click"}),a?(0,c._sak)({page:"ChiShaIndexPg",da_src:"shopRecommend.dish.click",da_act:"click"}):(0,c._sak)({page:"ChiShaIndexPg",da_src:"shopRecommend.toShop.click",da_act:"click"}),p.default.toNativeShop(o)},render:function(){var t=this.state,e=t.item,i=t.index,a=this;return r("div",{className:"recommend-item"},void 0,r("div",{className:"recommend-item-top","data-shopId":e.shop_info.shop_id,onClick:(0,s.wrapperClick)(a.toShopMenu),"data-index":i+1},void 0,r("div",{className:"left"},void 0,r("div",{className:"bgImg"},void 0,r("img",{className:"left-recommend-img","data-cateId":e.dish_list[0].category_id,"data-dishId":e.dish_list[0].dish_id,"data-index":i,src:(0,c._wrapperImage)(e.dish_list[0].dish_url,{s:"2",w:"500",h:"500"})}))),r("div",{className:"right"},void 0,r("img",{"data-cateId":e.dish_list[1].category_id,"data-dishId":e.dish_list[1].dish_id,"data-index":i,src:(0,c._wrapperImage)(e.dish_list[1].dish_url,{s:"2",w:"250",h:"250"})}),r("img",{className:"two","data-cateId":e.dish_list[2].category_id,"data-dishId":e.dish_list[2].dish_id,"data-index":i,src:(0,c._wrapperImage)(e.dish_list[2].dish_url,{s:"2",w:"250",h:"250"})}))),r("div",{className:"recommend-item-bottom","data-shopId":e.shop_info.shop_id,"data-index":i+1,onClick:(0,s.wrapperClick)(a.toShopMenu)},void 0,r("div",{className:e.recommand_reason?"pacman":"none"},void 0,e.recommand_reason.substr(0,12)),r("div",{className:"left"},void 0,r("img",{src:(0,c._wrapperImage)(e.shop_info.shop_logo,{s:"2",w:"100",h:"100"}),alt:""}),r("div",{className:"shop-name"},void 0,e.shop_info.shop_name)),m))}}),f=u;e.default=f;(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(u,"RecommendCard","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/Home/RecommendCard/RecommendCard.js"),__REACT_HOT_LOADER__.register(f,"default","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/Home/RecommendCard/RecommendCard.js"))})();t.exports=e.default},59:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,i,a,r){var o=e&&e.defaultProps,n=arguments.length-3;if(i||0===n||(i={}),i&&o)for(var s in o)void 0===i[s]&&(i[s]=o[s]);else i||(i=o||{});if(1===n)i.children=r;else if(n>1){for(var d=Array(n),l=0;l<n;l++)d[l]=arguments[l+3];i.children=d}return{$$typeof:t,type:e,key:void 0===a?null:""+a,ref:null,props:i,_owner:null}}}();i(131);var o=i(3),n=a(o),s=i(6),d=a(s),l=i(5),c=function(){for(var t,e=document.createElement("div").style,i=["t","webkitT","MozT","msT","OT"],a=0,r=i.length;a<r;a++)if(t=i[a]+"ransform",t in e)return t}(),h=400,p=r("span",{}),m=n.default.createClass({displayName:"Slider",mixins:[d.default],getInitialState:function(){var t=this.props,e=t.loop,i=void 0!==e&&e,a=t.wrapperClass,r=void 0===a?"slider_wrapper":a,o=t.itemClass,n=void 0===o?"navigator_item":o;return i=i&&this.props.children.length>1,h=this.props.time||400,{loop:i,wrapperClass:r,itemClass:n,children:this.setChildren(this.props)}},componentWillReceiveProps:function(t){var e=this.setChildren(t);this.setState({children:e,loop:t.loop&&this.props.children.length>1})},componentWillUpdate:function(t){},componentDidUpdate:function(){this.setSliderInfo(),this.props.reset&&this.toCard(this.state.loop?1:0,h)},componentDidMount:function(){this.initSet=!0,this.wrapper=this.refs.wrapper,this.x=0,this.y=0,this.currentIndex=this.state.loop?1:0,this.setSliderInfo(),this.props.move&&this.bindListener(),this.toCard(this.currentIndex,0),this.initSet=!1,this.props.cb&&this.props.cb(0),this.props.navigator&&this.setNav()},setChildren:function(t){var e=this.total,i=Array.isArray(t.children)?t.children.slice(0):[t.children],a=i.length;if(t.loop&&a>1){var r=n.default.cloneElement(i[0],{key:i[0].key+"loop"}),o=n.default.cloneElement(i[a-1],{key:i[a-1].key+"loop"});i.unshift(o),i.push(r)}return this.total=i.length,this.itemWidth=t.sliderWidth,this.scroller&&e<this.total&&(this.scroller.style.width=this.total*this.itemWidth+"px"),i},setSliderInfo:function(){this.initSet&&(this.scroller=this.refs.scroller,this.scroller.style.transitionTimingFunction="cubic-bezier(0.25, 0.46, 0.45, 0.94)",this.style=this.scroller.style,this.scroller.addEventListener("transitionend",this.transitionEnd),this.scroller.addEventListener("webkitTransitionEnd",this.transitionEnd));for(var t=this.scroller.children,e=0;e<t.length;e++)t[e].style.width=this.itemWidth+"px";this.scroller.style.width=this.total*this.itemWidth+"px",this.maxOffsetWidth=0-this.itemWidth*(this.total-1)},bindListener:function(){this.wrapper.addEventListener("touchstart",this.start),this.wrapper.addEventListener("touchmove",this.move),this.wrapper.addEventListener("touchend",this.end),this.wrapper.addEventListener("touchcancel",this.end)},unbindListener:function(){this.wrapper.removeEventListener("touchstart",this.start),this.wrapper.removeEventListener("touchmove",this.move),this.wrapper.removeEventListener("touchend",this.end),this.wrapper.removeEventListener("touchcancel",this.end)},render:function(){return n.default.createElement("div",{className:this.state.wrapperClass,ref:"wrapper"},this.getPreBtn(),n.default.createElement("div",{ref:"scroller",className:"slide_scroller"},this.state.children),this.getNavigator(),this.getNextBtn())},getPreBtn:function(){if(this.props.useButton)return r("div",{onClick:(0,l.wrapperClick)(this.prev),className:this.props.preBtnClass})},getNextBtn:function(){if(this.props.useButton)return r("div",{onClick:(0,l.wrapperClick)(this.next),className:this.props.nextBtnClass})},getNavigator:function(){if(this.props.navigator){var t=this.state.loop?this.state.children.slice(0,this.state.children.length-2):this.state.children;return n.default.createElement("div",{className:this.props.navigatorClass,ref:"nav"},t.map(function(){return p}))}},prev:function(){this.toCard(this.currentIndex-1,h)},next:function(){this.toCard(this.currentIndex+1,h)},start:function(t){this.inTransition&&this.pauseTransition(),this.distX=0,this.distY=0,this.startX=this.x,this.startY=this.y,this.pointX=t.touches[0].pageX,this.pointY=t.touches[0].pageY,this.startTime=Date.now(),this.moved=!0,this.setTransitionTime(),this.directionLocked=null,this.swipeDirection=!1},move:function(t){var e=t.touches[0],i=e.pageX-this.pointX,a=e.pageY-this.pointY,r=Date.now(),o=void 0,n=void 0;if(this.distX+=i,this.distY+=a,this.pointX=e.pageX,this.pointY=e.pageY,o=Math.abs(this.distX),n=Math.abs(this.distY),this.swipeDirection=this.distX>0,!(r-this.endTime>300&&o<10&&n<10)){if(n>o&&!this.directionLocked?this.directionLocked="v":n<o&&!this.directionLocked&&(this.directionLocked="h"),"h"==this.directionLocked)t.preventDefault();else if("v"==this.directionLocked)return void(this.moved=!1);a=0;var s=this.x+i,d=this.y+a;(!this.state.loop&&s>0||s<this.maxOffsetWidth)&&(s=this.x+i/3),this.moved=!0,this.translate(s,d)}},end:function(t){if(this.moved){this.endTime=Date.now();var e=this.getCardPosition();this.toCard(e,h)}},toCard:function(t,e){t=t<0?0:t,t=t>this.total-1?this.total-1:t;var i=void 0,a=!1;t==this.currentIndex||this.initSet||(a=!0,i=this.state.loop?t-1:t,i<0?i=this.total-3:i>this.total-3&&(i=0)),this.currentIndex=t;var r=0-t*this.itemWidth;!this.state.loop&&this.props.offset&&0!=t&&(t!=this.total-1?r+=(document.body.clientWidth-this.itemWidth)/2:t==this.total-1&&(r+=document.body.clientWidth-this.itemWidth));var o=0;this.translate(r,o,e),this.props.navigator&&this.setNav(),a&&this.props.cb&&this.props.cb(i)},getCardPosition:function(){if(this.x>0)return 0;if(this.x<this.maxOffsetWidth)return this.total-1;var t=void 0;return t=Math.abs(this.distX)>this.itemWidth/4?this.swipeDirection?this.currentIndex-1:this.currentIndex+1:this.currentIndex},transitionEnd:function(){this.inTransition=!1,this.state.loop&&(0==this.currentIndex?this.toCard(this.total-2):this.currentIndex==this.total-1&&this.toCard(1))},setNav:function(){var t=this.currentIndex;this.state.loop&&(0==t?t=this.total-3:t==this.total-1?t=0:t--);for(var e=this.refs.nav,i=0;i<e.children.length;i++)e.children[i].className="";e.children[t].className="active"},translate:function(t,e,i){this.setTransitionTime(i),i>0&&(this.inTransition=!0),this.style[c]="translate("+t+"px,"+e+"px) translateZ(0)",this.x=t,this.y=e},setTransitionTime:function(t){t=t||0,this.style.transitionDuration=t+"ms",this.style.webkitTransitionDuration=t+"ms"},pauseTransition:function(){var t,e,i=window.getComputedStyle(this.scroller,null);i=i[c].split(")")[0].split(", "),t=+(i[12]||i[4]),e=+(i[13]||i[5]),this.translate(t,e)},componentWillUnmount:function(){this.props.move&&this.unbindListener()}}),u=m;e.default=u;(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"transformName","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/slider/Slider.js"),__REACT_HOT_LOADER__.register(h,"time","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/slider/Slider.js"),__REACT_HOT_LOADER__.register(m,"Slider","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/slider/Slider.js"),__REACT_HOT_LOADER__.register(u,"default","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/components/common/slider/Slider.js"))})();t.exports=e.default},66:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,i,a,r){var o=e&&e.defaultProps,n=arguments.length-3;if(i||0===n||(i={}),i&&o)for(var s in o)void 0===i[s]&&(i[s]=o[s]);else i||(i=o||{});if(1===n)i.children=r;else if(n>1){for(var d=Array(n),l=0;l<n;l++)d[l]=arguments[l+3];i.children=d}return{$$typeof:t,type:e,key:void 0===a?null:""+a,ref:null,props:i,_owner:null}}}();i(136);var o=i(3),n=a(o),s=i(8),d=i(59),l=a(d),c=i(27),h=a(c),p=i(39),m=a(p),u=i(22),f=a(u),g=i(57),_=a(g),v=i(13),b=a(v),w=i(28),I=a(w),C=i(56),x=a(C),y=i(47),A=i(11),L=i(4),k=i(6),T=a(k),M=i(7),N=a(M),R=r("div",{className:"tips"},void 0,"此时段无推荐商家"),S=r("div",{},void 0,r("span",{},void 0,"我的关注"),r("span",{className:"focusTip"},void 0,"new")),P=r("div",{},void 0,r("span",{},void 0,"我的关注")),E=r("div",{},void 0,"热门推荐"),O=r(b.default,{}),z=n.default.createClass({displayName:"HomePage",mixins:[T.default],getInitialState:function(){return N.default.setTitleBar({title:"指南"}),this.props.userInfo.status&&N.default.setUserInfo(this.props.userInfo.result.userInfo),{bannerData:this.props.data.list,total:this.props.data.list.filter(function(t){return t.dish_list&&3==t.dish_list.length}).length,isFromRefresh:!1,ContentList:{dataList:[],current:0,total:0,rn:10},lazyLoad:!0,shopCardList:[],passuid:this.props.userInfo.result&&this.props.userInfo.result.userInfo.uid,topList:[],focus:this.props.focus,bannerList:this.props.bannerList}},componentDidMount:function(){document.body.scrollTop=0,this.getTopList(),N.default.hideLoading(),N.default.closePageRefresh(),this.addObserver(),L._lazyLoad.add(),this.statisticsAllShop(this.state.bannerData),N.default.setTitleBar({rightMenu:"收藏夹  ",rightMenuFunc:function(){N.default.login().then(function(t){N.default.changePage({offline:!0,url:location.href.replace(/#(.)*$/,"#/collectList")})})},title:"指南"})},addObserver:function(){var t=this;N.default.addObserver("chisha-content-status",function(e){for(var i=t.state.ContentList.dataList.slice(0),a=0;a<i.length;a++)if(i[a].content_id==e.id){i[a]=(0,L._extend)(i[a],e.newStatus);break}for(var r=t.state.topList.slice(0),o=0;o<r.length;o++)if(r[o].content_id==e.id){r[o]=(0,L._extend)(r[o],e.newStatus);break}t.setState({ContentList:(0,L._extend)(t.state.ContentList,{dataList:i}),topList:r})})},getTopList:function(){var t=this,e=this.props.dispatch;return e((0,y.getTopArticle)()).then(function(e){return t.setState({topList:e.result.list||[]}),e.result.list||[]})},contentRefresh:function(){var t=this,e=this;return new Promise(function(i,a){var r=t.getTopList(),o=e.props.dispatch((0,y.fetchContent)({pn:1,rn:10})).then(function(t){i(t);var a=t.result,r=[],o=0;t&&a&&(r=a.list,o=a.total),e.setState({isFromRefresh:!0,ContentList:{dataList:r,total:o,current:1,rn:10},lazyLoad:r.length})});Promise.all([r,o]).then(function(){i()})})},componentDidUpdate:function(t,e){L._lazyLoad.trigger()},getNextContentPage:function(){var t=this,e=t.state.ContentList;return t.props.dispatch((0,y.fetchContent)({pn:e.current+1,rn:e.rn})).then(function(i){var a=i.result,r=[],o=0;i&&a&&(r=a.list,o=a.total);var n=e.dataList.length+r.length>=o||!r.length;t.setState({isFromRefresh:!1,ContentList:{dataList:e.dataList.concat(r),total:o,current:++e.current,rn:e.rn},lazyLoad:!n})})},recommendRefresh:function(){var t=this,e=N.default.getSyncLocation();return new Promise(function(i,a){e.city_id?t.props.dispatch((0,y.fetchRecommendList)(e)).then(function(e){i(e),0==e.error_no&&(t.setState({bannerData:e.result.list,total:e.result.total,isFromRefresh:!0}),t.statisticsAllShop(e.result.list))}):(i(),t.setState({bannerData:[],total:0,isFromRefresh:!0}))})},bannerRefresh:function(){var t=this,e=this.props.dispatch,i=N.default.getSyncLocation();return new Promise(function(a,r){e((0,y.getBannerList)({city_id:i.city_id||0})).then(function(e){t.setState({bannerList:e.result.commend_list}),a()})})},focusRefresh:function(){var t=this,e=this.props.dispatch;return new Promise(function(i,a){e((0,A.getMyFocArt)()).then(function(e){t.setState({focus:+e.result.new}),i()},function(e){t.setState({focus:!1}),i()})})},statisticsAllShop:function(t){var e=[];t.filter(function(t){var i={};i.shop_id=t.shop_info.shop_id,i.strategy_source=t.strategy_source,e.push(i)});var i={daSrc:"celue-shopCardList",daAct:"show",daExt:{passuid:this.state.passuid,shopCardList:e}};this.setState({passuid:this.state.passuid,shopCardList:e}),N.default.sendOfflineStat(i)},onlyShowShop:function(t){var e={daSrc:"celue-showCard",daAct:"show",daExt:{passuid:this.state.passuid||"",index:t,shopId:this.state.bannerData[t]&&this.state.bannerData[t].shop_info.shop_id}};N.default.sendOfflineStat(e)},getRecommend:function(){var t=this,e=this,i={loop:!0,sliderWidth:document.body.clientWidth,move:!0,reset:this.state.isFromRefresh,cb:this.onlyShowShop};return(0,L._isIOS)()?(i.loop=!1,i.sliderWidth=document.body.clientWidth-42,i.offset=!0):(i.useButton=!0,i.preBtnClass="prev-btn",i.nextBtnClass="next-btn",i.navigator=!0,i.navigatorClass="slider-pagination",i.move=!1,i.wrapperClass="slider_wrapper android"),e.state.total>0?n.default.createElement(l.default,i,e.state.bannerData.filter(function(t){return t.dish_list&&3==t.dish_list.length}).map(function(e,i){return r(_.default,{item:e,index:i,passuid:t.state.passuid},e.shop_info.shop_id+"."+i)})):r("div",{className:"noShop"},void 0,r("img",{className:"bear",src:(0,L._wrapperImage)("http://img.waimai.baidu.com/pb/2a24f444217bf6d71ecbb89254c1e952d9"),alt:""}),R)},getLazyLoad:function(){if(this.state.lazyLoad)return r(f.default,{loading:this.getNextContentPage})},getFocusTip:function(){return 1!=JSON.parse(localStorage.getItem("hasFocus"))||this.state.focus?S:P},render:function(){var t=this,e=t.state.ContentList;return r("div",{id:"home-page"},void 0,n.default.createElement(I.default,{ref:"tab",list:[{render:function(){return E}},{render:function(){return t.getFocusTip()},onClick:function(){N.default.login().then(function(){N.default.changePage({newPage:!1,url:location.href.replace(/#.*/g,"#/myFocusArt")}),(0,L._sak)({page:"ChiShaIndexPg",da_src:"ChiShaIndexPg.pagePv.toFocus",da_act:"click"})})}}],activeIndex:0,className:"home"}),r(m.default,{loadingFunc:[this.contentRefresh,this.focusRefresh,this.bannerRefresh]},void 0,n.default.createElement("div",{className:"page_content",ref:"page"},r("div",{className:"all_content_title"},void 0,"美食 ",r("span",{style:{fontSize:"0.8rem"}},void 0,"•")," 城市 ",r("span",{style:{fontSize:"0.8rem"}},void 0,"•")," 生活"),this.state.bannerList&&this.state.bannerList.length>=3?r("div",{className:"banner_container"},void 0,this.state.bannerList.slice(0,3).map(function(t){return r(x.default,{data:t})})):"",r("div",{className:"top_list"},void 0,this.state.topList.map(function(t,e){return r(h.default,{data:t,index:e},t.content_id)})),r("div",{className:"normal_list"},void 0,e.dataList.map(function(t,e){return r(h.default,{data:t,index:e},t.content_id)})),this.getLazyLoad())),O)}}),j=(0,s.connect)()(z);e.default=j;(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"HomePage","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/pages/Home/HomePage.js"),__REACT_HOT_LOADER__.register(j,"default","/Users/wangcai/Work/waimai_4-0-1097-32_BRANCH/src/pages/Home/HomePage.js"))})();t.exports=e.default},86:function(t,e,i){e=t.exports=i(1)(),e.push([t.id,".banner_card{padding-bottom:1.5rem}.banner_card .head_img{width:6rem;height:6rem;display:block;margin:1.5rem auto 1rem;border-radius:50%}.banner_card .title{font-size:1.4rem;font-weight:700;color:#1a1a1a;text-align:center;line-height:1.1}",""])},87:function(t,e,i){e=t.exports=i(1)(),e.push([t.id,".recommend-item{overflow:hidden;position:relative;flex-shrink:0;vertical-align:top;padding:1.5rem .5rem}.recommend-item .recommend-item-top{display:-webkit-box;display:flex;width:100%;background:#fff;justify-content:space-around;-webkit-box-align:start;align-items:flex-start;padding:.5rem .5rem 0;font-size:0}.recommend-item .recommend-item-top .left{width:66.6%;position:relative}.recommend-item .recommend-item-top .left .bgImg:after{content:'';display:block;padding-top:calc(100% - 5px);padding-top:-webkit-calc(100% - 5px);visibility:hidden;height:0}.recommend-item .recommend-item-top .left .bgImg img{position:absolute;border-radius:2px}.recommend-item .recommend-item-top .right{width:33.3%;padding-left:.5rem}.recommend-item .recommend-item-top .right .two{margin-top:.5rem}.recommend-item .recommend-item-top img{width:100%;border-radius:2px}.recommend-item .recommend-item-bottom{display:-webkit-box;display:flex;height:5rem;-webkit-box-align:center;align-items:center;width:100%;background:#fff;-webkit-box-pack:justify;justify-content:space-between;position:relative;padding-left:1rem}.recommend-item .recommend-item-bottom .none{display:none}.recommend-item .recommend-item-bottom .pacman{position:absolute;top:-36px;left:5px;height:0;border-right:6px solid transparent;border-top:9pt solid rgba(0,0,0,.5);border-left:9pt solid rgba(0,0,0,.5);border-bottom:9pt solid rgba(0,0,0,.5);display:inline-block;padding-right:10px;color:#fff;line-height:0}.recommend-item .recommend-item-bottom .left{height:5rem;display:-webkit-box;display:flex;width:70%;-webkit-box-align:center;align-items:center}.recommend-item .recommend-item-bottom .left img{width:3rem;height:3rem;border-radius:100%}.recommend-item .recommend-item-bottom .left .shop-name{margin-left:1rem;font-size:1.4rem;-webkit-box-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#333;font-weight:700}.recommend-item .recommend-item-bottom .right{background:#ff2d4b;color:#fff;height:2.5rem;width:5.5rem;text-align:center;line-height:2.5rem;margin-right:1rem;border-radius:2px;font-size:1.2rem}",""])},96:function(t,e,i){e=t.exports=i(1)(),e.push([t.id,".slider_wrapper{width:100%;overflow:hidden;position:relative;background:#f5f5f5}.slider_wrapper .slide_scroller{display:-webkit-box;display:flex;flex-wrap:nowrap;overflow:hidden}.slider_wrapper .prev-btn{left:10px;z-index:200;background:url("+i(164)+") no-repeat;background-size:100%}.slider_wrapper .next-btn,.slider_wrapper .prev-btn{position:absolute;top:50%;width:40px;height:40px;-webkit-transform:translate(0, -40px);transform:translate(0, -40px)}.slider_wrapper .next-btn{right:10px;background:url("+i(163)+") no-repeat;background-size:100%}.slider_wrapper .slider-pagination{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);-webkit-transform:translateX(-50%)}.slider_wrapper .slider-pagination span{display:inline-block;width:7px;height:7px;border-radius:100%;background:rgba(0,0,0,.1);margin-right:5px}.slider_wrapper .slider-pagination span.active{background:rgba(0,0,0,.4)}.slider_wrapper.android{padding-bottom:20px}",""])},101:function(t,e,i){e=t.exports=i(1)(),e.push([t.id,"body{margin-top:4.5rem}#home-page{box-sizing:content-box;width:100%;overflow-x:hidden;overflow-y:auto;-webkit-user-select:none;user-select:none;background-color:#f5f5f5}#home-page .drag_wrapper .banner_container{border-top:1px solid #f5f5f5;width:100%;overflow:hidden;position:relative}#home-page .drag_wrapper .banner_container .banner_card{float:left;width:33.33333%}#home-page .drag_wrapper .banner_container:after,#home-page .drag_wrapper .banner_container:before{content:'';display:block;position:absolute;height:100%;top:0;bottom:0;width:1px;background:#f5f5f5}#home-page .drag_wrapper .banner_container:before{left:33.3333%}#home-page .drag_wrapper .banner_container:after{left:66.666666%}#home-page .drag_wrapper .noShop{background:#fff;text-align:center;border-bottom:1px solid #f5f5f5}#home-page .drag_wrapper .noShop .bear{width:10rem;height:auto;margin-top:3rem}#home-page .drag_wrapper .noShop .tips{color:gray;padding-bottom:3rem}#home-page .drag_wrapper .all_content_title{width:100%;padding:1.5rem 1rem;font-size:1.6rem;line-height:1}#home-page .drag_wrapper .drag_loading{background-color:#f5f5f5}#home-page .drag_wrapper .page_content,#home-page .tab.home{background-color:#fff}#home-page .tab.home{width:100%;position:fixed;top:0;z-index:10}#home-page .tab.home .tabItem{color:#333;font-size:1.6rem;height:4.5rem;padding:1.45rem 0;line-height:1;border-bottom:1px solid #efefef;position:relative}#home-page .tab.home .tabItem.active{color:#ff2b4d;border-bottom:1px solid #ff2b4d}#home-page .tab.home .tabItem .focusTip{background-size:100% 100%;background-image:url("+i(162)+");color:#fff;padding:.3rem .3rem .4rem;font-size:1rem;position:relative;top:-.2rem;left:.2rem}",""])},121:function(t,e,i){var a=i(86);"string"==typeof a&&(a=[[t.id,a,""]]);i(2)(a,{});a.locals&&(t.exports=a.locals)},122:function(t,e,i){var a=i(87);"string"==typeof a&&(a=[[t.id,a,""]]);i(2)(a,{});a.locals&&(t.exports=a.locals)},131:function(t,e,i){var a=i(96);"string"==typeof a&&(a=[[t.id,a,""]]);i(2)(a,{});a.locals&&(t.exports=a.locals)},136:function(t,e,i){var a=i(101);"string"==typeof a&&(a=[[t.id,a,""]]);i(2)(a,{});a.locals&&(t.exports=a.locals)},162:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgd2lkdGg9IjM4IiBoZWlnaHQ9IjI2IiB2aWV3Qm94PSIwIDAgMzggMjYiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNmZjJkNGI7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxlbGxpcHNlIGN4PSIxOSIgY3k9IjEzIiByeD0iMTkiIHJ5PSIxMyIgY2xhc3M9ImNscy0xIi8+Cjwvc3ZnPgo="},163:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgd2lkdGg9IjYxIiBoZWlnaHQ9IjYxIiB2aWV3Qm94PSIwIDAgNjEgNjEiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgICAgc3Ryb2tlOiAjY2NjOwogICAgICAgIHN0cm9rZS13aWR0aDogMXB4OwogICAgICAgIGZpbGwtb3BhY2l0eTogMC45OwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMzMzM7CiAgICAgICAgZmlsbC1ydWxlOiBldmVub2RkOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8Zz4KICAgIDxjaXJjbGUgY3g9IjMwLjUiIGN5PSIzMC41IiByPSIzMCIgY2xhc3M9ImNscy0xIi8+CiAgICA8cGF0aCBkPSJNMjcuMDAwLDQxLjIxMyBMMjYuMDAwLDQwLjIxMyBMMzYuMjEzLDMwLjAwMCBMMjYuMDAwLDE5Ljc4NyBMMjcuMDAwLDE4Ljc4NyBMMzguMjEzLDMwLjAwMCBMMjcuMDAwLDQxLjIxMyBaIiBjbGFzcz0iY2xzLTIiLz4KICA8L2c+Cjwvc3ZnPgo="},164:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCIgd2lkdGg9IjYxIiBoZWlnaHQ9IjYxIiB2aWV3Qm94PSIwIDAgNjEgNjEiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgICAgc3Ryb2tlOiAjY2NjOwogICAgICAgIHN0cm9rZS13aWR0aDogMXB4OwogICAgICAgIGZpbGwtb3BhY2l0eTogMC45OwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMzMzM7CiAgICAgICAgZmlsbC1ydWxlOiBldmVub2RkOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8Zz4KICAgIDxjaXJjbGUgY3g9IjMwLjUiIGN5PSIzMC41IiByPSIzMCIgY2xhc3M9ImNscy0xIi8+CiAgICA8cGF0aCBkPSJNMzMuMDAwLDQxLjIxMyBMMjEuNzg3LDMwLjAwMCBMMzMuMDAwLDE4Ljc4NyBMMzQuMDAwLDE5Ljc4NyBMMjMuNzg3LDMwLjAwMCBMMzQuMDAwLDQwLjIxMyBMMzMuMDAwLDQxLjIxMyBaIiBjbGFzcz0iY2xzLTIiLz4KICA8L2c+Cjwvc3ZnPgo="}});